dynamic-embeddings-v2/
├── config/
│   ├── __init__.py
│   └── model_config.py            # Model and training configurations
│
├── src/
│   ├── __init__.py
│   │
│   ├── models/
│   │   ├── __init__.py
│   │   ├── experts.py             # Expert encoder implementations
│   │   ├── router.py              # MoE router with learned routing
│   │   ├── fusion.py              # AdapterFusion layers
│   │   └── dynamic_model.py       # Main dynamic embedding model
│   │
│   ├── training/
│   │   ├── __init__.py
│   │   ├── trainer.py             # Training logic with curriculum learning
│   │   ├── dataset.py             # Contrastive learning datasets
│   │   └── losses.py              # Custom loss functions
│   │
│   ├── evaluation/
│   │   ├── __init__.py
│   │   ├── mteb_evaluator.py      # MTEB benchmark evaluation
│   │   ├── domain_shift.py        # Domain shift evaluation
│   │   └── metrics.py             # Evaluation metrics
│   │
│   └── utils/
│       ├── __init__.py
│       ├── data_loader.py         # Data loading utilities
│       └── visualization.py       # Routing analysis visualization
│
├── scripts/
│   ├── train.py                   # Main training script
│   ├── evaluate.py                # Evaluation script
│   └── download_models.py         # Download required models
│
├── experiments/
│   ├── run_mteb.py               # Run MTEB benchmarks
│   └── ablation_study.py         # Ablation studies
│
├── requirements.txt
├── setup.py
└── README.md